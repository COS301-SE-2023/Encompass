<div class="overlay">

  <ion-header>
    <ion-toolbar class="profileToolbar">
      <div class="toolbar-content">
        <ion-grid>
          <ion-row class="row-filter">
            <ion-searchbar class="searchbar" placeholder="Search" (ionChange)="search($event)"
            ></ion-searchbar>
          </ion-row>
          <ion-row class="row-filter">
            <ion-col size="2">
              <ion-button id="PostBtn" fill="clear" class="active-button buttonStyle" (click)="postChange()">
                <span>Posts</span>
              </ion-button>
            </ion-col>
            <ion-col size="2">
              <ion-button id="CommentsBtn" fill="clear" class="none buttonStyle" (click)="commChange()">
                <span>Communities</span>
              </ion-button>
            </ion-col>
            <ion-col size="2">
              <ion-button id="eventBtn" fill="clear" class="none buttonStyle" (click)="eventChange()">
                <span>People</span>
              </ion-button>
            </ion-col>
            <ion-col size="2">
              <ion-button id="PeopleBtn" fill="clear" class="none buttonStyle" (click)="peopleChange()">
                <span>Events</span>
              </ion-button>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>
    </ion-toolbar>
  </ion-header>

  <div class="overlay-container">
    <ion-grid>
      <ion-row class="row-filter">
        <ion-col size="5">

  
  
          <!-- posts -->
          <!-- *ngIf="settings != null && !(post.ageRestricted == true && settings.profile.nsfw == true)" -->
          <div *ngFor="let post of posts?.slice()?.reverse();let i = index">
  
            <ion-card class = "PostCard card-styles" >

              <div class = "PostCardHeader">
                <div class = "PostImageContainer" >
                  <img src =  {{post.communityImageUrl}}  class = "postImage" 
                  onerror="this.src='assets/icon/Group.png';"
                  (click)="GoToCommunity(post.community)">
                </div>
              <div class = "PostDetails"  >
                <div class = "TitleNameOptions">
                  <div style = "display: flex; margin-left: 1.5%;">
                    <div class = "Title" (click)="GoToCommunity(post.community)">{{post.community}}</div>
                    <div class = "Name" (click)="GoToProfile(post.username)"> @{{post.username}}</div>
                  </div>
                  <div style = "display: flex; margin-right: 1.5%; ">
  
                    <label class = "report" *ngIf="reports[i]" 
                    (click)="ReportPost(i, post)">Report Post</label>
  
                    <label class = "report" *ngIf="post.reported" 
                    style = "color: red;"
                    >Post Reported.</label>
  
                    <button class = "Options" *ngIf="!post.reported" (click)="Report(i)"> 
                    <ion-icon name="ellipsis-horizontal-outline"></ion-icon></button>
  
                  </div>
        
                 </div>
                
                  <div class = "GenreIcons" >
                    <div style = "width: 30%; display: flex; justify-content: space-around;">
                      <div *ngFor="let category of post.categories; let k=index" class="tooltip">
                        <img src = "assets/icon/{{category}}.png" class="imgDiv">
                        <span class="tooltiptext">{{category}}</span>
                      </div>
                    
                    </div>
                    <div style = "width: 70%; display: flex; justify-content: space-evenly;">
                      <button *ngIf="post.spoiler" class = "specialBtn">Spoiler</button>
                      <button *ngIf="post.ageRestricted" class = "specialBtn">NSFW</button>
                 </div>
                 </div>
  
            </div> 
              </div>
  
              <div class = "PostBody" (click)="GoToComments(post._id)">
  
                <div class = "text">
                    <h5>{{post.title}}</h5>
                    <div style = "display:flex;justify-content: center;">
                      <img src = {{post.imageUrl}} style="border-radius: 15px;" >
                    </div>
                    <br>
                    <span *ngIf="post.text && post.text.toLowerCase().includes((keyword ?? '').toLowerCase())">{{post.text}}</span>
                </div>
              </div>
              <div class = "PostFooter">
                <div class = "date" *ngIf="post.dateAdded.length == 21">{{post.dateAdded.slice(0, 9)}}</div>
                <div class = "date" *ngIf="post.dateAdded.length != 21">{{post.dateAdded.slice(0, 10)}}</div>
               
                
                <div class = "icons">
                  <div style = "text-align: center;">
                    <ion-icon name="share-social-outline" id = "icons2" *ngIf = "!sharing[i]" (click)="Share(i,post)"></ion-icon>
                    <ion-icon name="share-social-outline" id = "icons2" style="color: purple;" *ngIf="sharing[i]" ></ion-icon>
                    <div *ngIf = "!sharing[i]">{{post.shares}}</div>
                    <div *ngIf = "sharing[i]" style = "font-family: CustomFont;">Link Copied!</div>
  
                  </div>
                  <div style = "text-align: center;">
                    <ion-icon name="chatbubble-outline" id = "icons2" (click)="GoToComments(post._id)"></ion-icon>
                    <div>{{post.comments}}</div>
                  </div>
                  <div style = "text-align: center;">
                    <div *ngIf="profile != null">
                    <ion-icon name="heart" *ngIf = "post.likes.includes(profile.username)" id="icons2"style = "color:red" (click)="Dislike(i, post)"></ion-icon>
                    <ion-icon name="heart-outline" id = "icons2" *ngIf = "!post.likes.includes(profile.username)" (click)="Like(i, post)"></ion-icon>
                    <div>{{post.likes.length}}</div>
                    </div>
                  </div>
                  
                </div>
              </div>
             </ion-card>
            </div>
  
        </ion-col>
  
  
  
  
  
  
  
  
  
        <!-- recommendations -->
  
        <ion-col size="4">
          <ion-card class="recomcard">
          <div>
              <div class = "RecomCommunities" >
              <div class = "RecomHeader">
                <ion-grid>
                  <ion-row class="recomRow">
                    <ion-col size="10">
                      <div style="font-size: 18px; margin-top: 10px;">Related Communities:</div>
                    </ion-col>
                  </ion-row>
                </ion-grid>
              </div>
            </div>
            
            <!-- communities -->
  
            <ion-grid>
              <ion-row class="content-row">
                <ion-col size="11">
                  <ion-card class = "CommunityCard">
                    <div class = "CommunityHeader"> 
                      <img src = "assets/icon/Alien.jpg" class = "CommunityIcon" >
                       <div class = "CommunityDetails" >
                         <div class = "CommunityName">XenoMorffs</div>
                         <div class = "CommunityMembers">92 Members</div>
                         <div class = "CommunityGenres">
                         <img src = "assets/icon/Science-Fiction.png" class="imgDiv">
                         <img src = "assets/icon/Adventure.png"  class="imgDiv" >
                         <img src = "assets/icon/Horror.png"  class="imgDiv"></div>
                     </div>
                     <div class = "CommunityAdd">
                       <ion-icon name="add-circle-outline" style="
                       font-size: 50px;
                       color: #231942;
                       "></ion-icon>
                     </div>
                     </div>
                     <div class = "CommunityBody">
                         <div class = "CommunityDesc">
                          Join the ultimate extraterrestrial terror celebration! The Ridley Scott Alien Fan Club awaits you!       </div>
                        </div>
                   </ion-card>
                </ion-col>
              </ion-row>
  
              <ion-row class="content-row">
                <ion-col size="11">
                  <ion-card class = "CommunityCard">
                    <div class = "CommunityHeader"> 
                      <img src = "assets/icon/HP.jpg" class = "CommunityIcon" >
                       <div class = "CommunityDetails" >
                         <div class = "CommunityName">Potterheads</div>
                         <div class = "CommunityMembers">105 Members</div>
                         <div class = "CommunityGenres">
                         <img src = "assets/icon/Fantasy.png" class="imgDiv">
                         <img src = "assets/icon/Adventure.png"  class="imgDiv">
                         <img src = "assets/icon/Movies.png"  class="imgDiv">
                        </div>
                     </div>
                     <div class = "CommunityAdd">
                       <ion-icon name="add-circle-outline" style="
                       font-size: 50px;
                       color: #231942;
                       "></ion-icon>
                     </div>
                     </div>
                     <div class = "CommunityBody">
                         <div class = "CommunityDesc">
                          Join in on all things Potterverse!
                        </div>
                        </div>
                   </ion-card>
                </ion-col>
              </ion-row>
            </ion-grid>
   
              </div>
              <!-- <br> -->
          </ion-card>
          
  
  
          
      </ion-col>
      </ion-row>
    </ion-grid>
  
  </div>
  <ion-button class="backtotop">Back To Top</ion-button>

</div>