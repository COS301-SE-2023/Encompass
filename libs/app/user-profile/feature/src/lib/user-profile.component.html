<div class="overlay">

  <ion-header>
    <ion-toolbar class="profileToolbar">
      <div class="toolbar-content">
        <ion-grid>
          <ion-row class="row-filter">
            <ion-col size="2">
              <ion-button id="PostBtn" fill="clear" class="active-button buttonStyle" (click)="postChange()">
                Posts
              </ion-button>
            </ion-col>
            <ion-col size="2">
              <ion-button id="eventBtn" fill="clear" class="none buttonStyle" (click)="eventChange()">
                Events
              </ion-button>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>
    </ion-toolbar>
  </ion-header>


  <ion-grid>
    <ion-row class="filter-row">
      <ion-col size="5">
        <div *ngIf = "seePosts">
          <div  *ngFor="let post of userPosts;let i = index">

            <ion-card class = "PostCard" >
              <div class = "PostCardHeader">
                <div class = "PostImageContainer" >
                  <img src =  {{post.communityImageUrl}}  class = "postImage" >
                </div>
              <div class = "PostDetails"  >
                <div class = "TitleNameOptions">
                  <div style = "display: flex; margin-left: 1.5%;">
                    <div class = "Title">{{post.community}}</div>
                    <div class = "Name" > @{{post.username}}</div>
                  </div>
                  
        
                 </div>
                
                <div class = "GenreIcons" >
                  <div style = "width: 30%; display: flex; justify-content: space-around;">
                    <img *ngFor="let category of post.categories; let k=index" src = "assets/icon/{{category}}.png" class="imgDiv">
                    </div>
                    <div style = "width: 70%; display: flex; justify-content: space-evenly;">
                      <button *ngIf="post.spoiler" class = "specialBtn">Spoiler</button>
                      <button *ngIf="post.ageRestricted" class = "specialBtn">Age Restricted</button>
                  </div>
                </div>

            </div> 
              </div>
              <div class = "PostBody"  (click)="GoToComments(post._id)">
  
                <div class = "text">
                    <h5>{{post.title}}</h5>
                    <div style = "display:flex;justify-content: center;">
                      <img src = {{post.imageUrl}} style="border-radius: 10px;" >
                    </div>
                    <br>
                    {{post.text}}
                </div>
              </div>
              <div class = "PostFooter">
                <div class = "date">{{datesAdded[i]}}</div>
                <div class = "icons">
                  <div style = "text-align: center;">
                    <ion-icon name="share-social-outline" id = "icons2" *ngIf = "!sharing[i]" (click)="Share(i,post)"></ion-icon>
                    <ion-icon name="share-social-outline" id = "icons2" style="color: purple;" *ngIf="sharing[i]" ></ion-icon>
                    <div *ngIf = "!sharing[i]">{{post.shares}}</div>
                    <div *ngIf = "sharing[i]" style = "font-family: CustomFont;">Link Copied!</div>
  
                  </div>
                  <div style = "text-align: center;">
                    <ion-icon name="chatbubble-outline" id = "icons2" (click)="GoToComments(post._id)"></ion-icon>
                    <div>{{post.comments}}</div>
                  </div>
                  <div style = "text-align: center;">
                    <div *ngIf="profile != null">
                    <ion-icon name="heart" *ngIf = "post.likes.includes(profile.username)" id="icons2"style = "color:red" ></ion-icon>
                    <ion-icon name="heart-outline" id = "icons2" *ngIf = "!post.likes.includes(profile.username)" ></ion-icon>
                    <div>{{post.likes.length}}</div>
                    </div>
                  </div>
                  
                </div>
              </div>
             </ion-card>
            </div>
        </div>
        
       
      </ion-col>





      <ion-col size="4">
        
        <ion-card class = "curve">
          <div style="position: relative">
          <img class="profilePicture" src={{userProfile?.profileImage}} onerror="this.src='assets/icon/Profile.png';"  />
          <img class="banner" src={{userProfile?.profileBanner}} onerror="this.src='assets/icon/Banner.png';" />
          </div>
          <ion-card-header >
            <ion-card-title>{{userProfile?.name}} {{userProfile?.lastName}}
              <ion-button
            fill="clear"
            size="medium"
            color="dark"
            class="edit-button">
            <ion-icon name="share-social"></ion-icon>
          </ion-button>
          <ion-button
            fill="clear"
            size="medium"
            color="dark"
            class="edit-button"
            (click)="Follow()">
            <ion-icon name="person-add"></ion-icon>          
          </ion-button>
          
          <ion-card-subtitle style="margin-top: 5px; ">@{{userProfile?.username}}</ion-card-subtitle>
            </ion-card-title>
          </ion-card-header>
        
          <ion-card-content style="font-size: 15px; margin-bottom: 15px; ">
            <div>{{userProfile?.bio}}</div>
            <div class="profile-info-container">
              <div class="profile-info info-post">{{userPosts?.length}} <br> Posts</div>
              <div id="follow-trigger" class="profile-info"> <br> Followers</div>
              <div id="following-trigger" class="profile-info"> <br> Following</div>
            </div>
          </ion-card-content>
         

        </ion-card>

        <ion-modal #modal trigger="follow-trigger" [presentingElement]="presentingElement">
          <ng-template>
            <ion-header>
              <ion-toolbar>
                <ion-title>Followers</ion-title>
              </ion-toolbar>
            </ion-header>
            <ion-content>
              <ion-list>
                <ion-item>
                  <ion-avatar slot="start">
                    <ion-img src="https://i.pravatar.cc/300?u=b"></ion-img>
                  </ion-avatar>
                  <ion-label>
                    <h2>Connor Smith</h2>
                    <p>Sales Rep</p>
                  </ion-label>
                </ion-item>
                <ion-item>
                  <ion-avatar slot="start">
                    <ion-img src="https://i.pravatar.cc/300?u=a"></ion-img>
                  </ion-avatar>
                  <ion-label>
                    <h2>Daniel Smith</h2>
                    <p>Product Designer</p>
                  </ion-label>
                </ion-item>
                <ion-item>
                  <ion-avatar slot="start">
                    <ion-img src="https://i.pravatar.cc/300?u=d"></ion-img>
                  </ion-avatar>
                  <ion-label>
                    <h2>Greg Smith</h2>
                    <p>Director of Operations</p>
                  </ion-label>
                </ion-item>
                <ion-item>
                  <ion-avatar slot="start">
                    <ion-img src="https://i.pravatar.cc/300?u=e"></ion-img>
                  </ion-avatar>
                  <ion-label>
                    <h2>Zoey Smith</h2>
                    <p>CEO</p>
                  </ion-label>
                </ion-item>
              </ion-list>
            </ion-content>
          </ng-template>
        </ion-modal>

        <ion-modal #modal trigger="following-trigger" [presentingElement]="presentingElement2">
          <ng-template>
            <ion-header>
              <ion-toolbar>
                <ion-title>Following</ion-title>
              </ion-toolbar>
            </ion-header>
            <ion-content>
              <ion-list>
                <ion-item>
                  <ion-avatar slot="start">
                    <ion-img src="https://i.pravatar.cc/300?u=b"></ion-img>
                  </ion-avatar>
                  <ion-label>
                    <h2>Connor Smith</h2>
                    <p>Sales Rep</p>
                  </ion-label>
                </ion-item>
                <ion-item>
                  <ion-avatar slot="start">
                    <ion-img src="https://i.pravatar.cc/300?u=a"></ion-img>
                  </ion-avatar>
                  <ion-label>
                    <h2>Daniel Smith</h2>
                    <p>Product Designer</p>
                  </ion-label>
                </ion-item>
                <ion-item>
                  <ion-avatar slot="start">
                    <ion-img src="https://i.pravatar.cc/300?u=d"></ion-img>
                  </ion-avatar>
                  <ion-label>
                    <h2>Greg Smith</h2>
                    <p>Director of Operations</p>
                  </ion-label>
                </ion-item>
                <ion-item>
                  <ion-avatar slot="start">
                    <ion-img src="https://i.pravatar.cc/300?u=e"></ion-img>
                  </ion-avatar>
                  <ion-label>
                    <h2>Zoey Smith</h2>
                    <p>CEO</p>
                  </ion-label>
                </ion-item>
              </ion-list>
            </ion-content>
          </ng-template>
        </ion-modal>



        <div class="awards">
          <ion-title class="awards-header">
            Awards
          </ion-title>
          <div class="badges">
            <img src="assets/icon/Award1.jpg" class="badge">
            <img src="assets/icon/Award2.JPG" class="badge">
          </div>
        </div>






        <ion-card>
          <ion-card-header>
            <ion-card-title color="grey">Top Communities</ion-card-title>
          </ion-card-header>
        
           
            
        </ion-card>

      </ion-col>
    </ion-row>
  </ion-grid>

</div>

<!-- <ion-icon class = "Rocket1" name="rocket-outline"></ion-icon> -->
