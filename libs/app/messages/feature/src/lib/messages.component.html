
<div class="container">
    <div class="chat-list">       
      <ul>
        <li class ="UserName">
            @{{profile?.username}}
            <ion-icon style="font-size: 50px;" 
          name="chatbubble-ellipses-outline"
          id="icon" (click)="toggleSelect()">
        </ion-icon> 
        <ion-select class="select" [(ngModel)]="selectedValue" (ionChange)="onSelectChange()" interface="popover" (click)="getUsers()"> 
          <ion-select-option *ngFor="let c of messagesProfile" 
          [value]="c" class = "option" >
          {{c.name}} {{c.lastName}}</ion-select-option>
      </ion-select>
        </li>
        <li class ="AddChat">
          <label>Chats</label>
          
          </li>
          <div *ngFor="let chats of chatProfiles">
            <li (click)="fetchMessages(chats.chatId,chats.name,chats.lastName,chats.profilePicture, chats.username)" class = "chatItem"> 
            <img src= {{chats.profilePicture}} onerror="this.src='assets/icon/Profile.png';" class = "imgDiv">
            {{chats.name}} {{chats.lastName}}</li>
          </div>
          
      </ul>
    </div>
    <div class="chat-area" >
      <div class = "User" [hidden]="!hasMessages">
        <div style = "display: flex; align-items: center;height: 100%;">
          <img src= {{userImage}} onerror="this.src='assets/icon/Profile.png';" class = "imgDiv3">
          {{firstName}} {{lastName}}
        </div>
        
      </div>
      <div class = "messages" chatScroll *ngIf="hasMessages 
      && profile !== null && messages !== null && messages !== undefined 
      && profile !== undefined">
      
        <div *ngFor="let message of messages.messages">
          <div class="message" *ngIf="message.username !== profile.username">
            <img src={{userImage}} onerror="this.src='assets/icon/Profile.png';" class = "imgDiv2">
            <div class = "msg">{{message.message}}</div>
          </div>

          <div class="your-message" *ngIf="message.username === profile.username">
            <div class = "msg2">{{message.message}}</div>
            <img src={{profile.profileImage}} class = "imgDiv2">

          </div>
        </div>
    
      </div>
      <div class = "Typer" [hidden]="!hasMessages">
      <div style = "display: flex; justify-content: center;">
        <form class="message-form" [formGroup]="messageForm" class = "messageInput">
          
          <ion-textarea  class="input" formControlName="messageInput" 
          [(ngModel)]="inputValue" (input)="checkInput()"
          placeholder="Message..." ></ion-textarea >
          <button *ngIf = "isValid"  type="submit" (click)="sendMessage()"><ion-icon name="send" class = "icon1"></ion-icon></button>
          <button *ngIf = "!isValid" disabled = true type="submit" 
          (click)="sendMessage()"><ion-icon name="send" class = "icon2"></ion-icon></button>
        </form>
      </div>
      </div>
</div>

